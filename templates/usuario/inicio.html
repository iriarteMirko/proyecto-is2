{% extends "base/base.html" %}

{% block content %}

{% load static %}

<main class="container-fluid p-0">
    <div class="bg-image" style="background-image: url('{% static 'images/cancha-banner.jpg' %}'); background-size: cover; background-position: center; height: 400px; position: relative;">
        <div class="overlay" style="background-color: rgba(0, 0, 0, 0.5); position: absolute; top: 0; left: 0; right: 0; bottom: 0;"></div>
        <div class="content d-flex flex-column justify-content-center align-items-center" style="height: 100%; position: relative; z-index: 2;">
            <h1 class="display-1 text-uppercase text-white" style="font-weight: 900; letter-spacing: 2px; text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.7);">
                <b>Reserva tu Cancha</b>
            </h1>
            <p class="fs-5 text-white text-center" style="font-weight: 700; letter-spacing: 1.5px; line-height: 1.6; text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);">
                - Red de Canchas: Explora nuestra red exclusiva de canchas y encuentra el lugar perfecto para tu próximo partido.
            </p>
            <p class="fs-5 text-white text-center" style="font-weight: 700; letter-spacing: 1.5px; line-height: 1.6; text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);">
                - Registro de Equipos: Únete y crea tu equipo de fútbol en minutos. ¡Es fácil y rápido!
            </p>
            <p class="fs-5 text-white text-center" style="font-weight: 700; letter-spacing: 1.5px; line-height: 1.6; text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);">
                - Iniciar Sesión: Accede a tu cuenta para gestionar reservas y mucho más con solo un clic.
            </p>
            <p class="fs-5 text-white text-center" style="font-weight: 700; letter-spacing: 1.5px; line-height: 1.6; text-shadow: 3px 3px 8px rgba(0, 0, 0, 0.7);">
                - Registrarse: ¿Nuevo aquí? Regístrate ahora y comienza a disfrutar de todas nuestras increíbles funcionalidades.
            </p>
        </div>
    </div>
    <!-- Barra de búsqueda de canchas -->
    <div class="container mt-4">
        <div class="row justify-content-center mb-5">
            <div class="col-lg-8">
                <form class="input-group" method="GET" action="">
                    <input type="search" class="form-control" placeholder="Busca en nuestras canchas disponibles">
                    <button class="btn btn-success" type="submit" style="background-color: #4CAF50;">Buscar</button>
                </form>
            </div>
        </div>
        <!-- Sección de canchas registradas -->
        <div class="row">
            <div class="col-lg-12 text-center mb-4">
                <h2 class="display-5" style="color: #4CAF50;">¡Descubre Nuestras Canchas de Futbol Registradas!</h2>
            </div>
        </div>
        <div class="row g-3">
            {% if canchas %}
                <!-- Iterar sobre las canchas registradas -->
                {% for cancha in canchas %}
                    <div class="col-md-4">
                        <div class="card">
                            <img src="{% static 'images/cancha-banner.jpg' %}" class="card-img-top" alt="Cancha {{ cancha.nombre }}">
                            <div class="card-body">
                                <h5 class="card-title">{{ cancha.nombre }}</h5>
                                <p class="card-text">"Ubicación: {{ cancha.direccion.tipo_calle }} {{ cancha.direccion.nombre_calle }} {{ cancha.direccion.numero_calle }}, {{ cancha.direccion.distrito }}."</p>
                                <p class="text-warning">Disponible: {{ cancha.disponibilidad|yesno:"Sí,No" }}</p>
                                <p class="text-muted">Responsable: {{cancha.responsable}}</p>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            {% else %}
                <!-- Mostrar mensaje si no hay canchas registradas -->
                <div class="col-lg-12 text-center">
                    <p class="fs-4 text-muted">Aún no existen canchas registradas.</p>
                </div>
            {% endif %}
        </div>
        <!-- Nueva sección para los botones de registro e inicio de sesión -->
        {% if not request.user.is_authenticated %}
        <div class="container my-5 py-5 d-flex justify-content-center" style="background-color: #ECF0F1; border-radius: 15px; max-width: 900px; margin: 0 auto;">
            <div class="text-center">
                <div class="row text-center">
                    <div class="col-lg-12 mb-3">
                        <h3 class="display-6" style="color: #4CAF50;">¡Únete a nuestra comunidad!</h3>
                        <p class="lead">Regístrate o inicia sesión para empezar a reservar las mejores canchas cerca de ti.</p>
                    </div>
                </div>
                <div class="row row-cols-1 row-cols-sm-2 gy-3">
                    <div class="col">
                        <a class="btn btn-success btn-lg px-4 py-2 w-100" href="/signup/" style="background-color: #4CAF50;">
                            Registrarse
                        </a>
                    </div>
                    <div class="col">
                        <a class="btn btn-dark btn-lg px-4 py-2 w-100" href="/signin/" style="background-color: #2C3E50;">
                            Iniciar Sesión
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
        <!-- Nueva sección: Registro de Cancha -->
        {% if request.user.is_authenticated %}
        <div class="container my-5 py-5 d-flex justify-content-center" style="background-color: #ECF0F1; border-radius: 15px; max-width: 900px; margin: 0 auto;">
            <div class="text-center">
                <div class="row text-center">
                    <div class="col-lg-12 mb-3">
                        <h3 class="display-6" style="color: #4CAF50;">¿Tienes una cancha? Regístrala aquí</h3>
                        <p class="lead">Añade tu cancha a nuestra plataforma y empieza a recibir reservas.</p>
                    </div>
                </div>
                <div class="row gy-3">
                    <div class="col">
                        <a class="btn btn-success btn-lg px-4 py-2 w-100" href="{% url 'registro_cancha' %}" style="background-color: #4CAF50;">
                            Registrar Cancha
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</main>

{% endblock %}
