{% extends "base/base.html" %}

{% block content %}

<main class="container p-0">
    <div class="row justify-content-center">
        <!-- Barra lateral izquierda -->
        <div class="col-md-3">
            <div class="card shadow-lg p-4" style="border-radius: 15px; background-color: #f5f5f5;">
                <div class="text-center">
                    <a class="d-flex justify-content-center align-items-center overflow-hidden rounded-circle mx-auto mb-3"
                        style="width: 150px; height: 150px; background-size: cover; background-position: center; background-image: url({% if user.imagen %} {{ user.imagen.url }} {% else %} 'https://imgur.com/CuXg45K.jpg' {% endif %});"
                        aria-label="Imagen de perfil"></a>
                    <h4 style="font-weight: bold; color: #F1C40F;">{{ user.nombre }} {{ user.apellidos }}</h4>
                    {% if user.is_staff %}
                        <span class="badge bg-danger">Administrador</span>
                    {% else %}
                        {% if responsable %}
                            <span class="badge bg-success">Responsable</span>
                        {% else %}
                            <span class="badge bg-primary">Cliente</span>
                        {% endif %}
                    {% endif %}
                </div>
            </div>
        </div>
        <!-- Informaci贸n principal -->
        <div class="col-md-5">
            <div class="card shadow-lg p-4 mb-0" style="border-radius: 15px; background-color: #f5f5f5;">
                <h4 style="color: #2C3E50; font-weight: bold;">Informaci贸n Personal</h4>
                <hr>
                <div class="row">
                    <div class="col-md-12">
                        <!-- Mostrar DNI solo si es su propio perfil -->
                        {% if request.user == user %}
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: bold; color: #F1C40F;">DNI:</label>
                            <input type="text" readonly class="form-control shadow-sm" value="{{ user.dni }}">
                        </div>
                        {% endif %}
                        {% if not user.is_staff %}
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: bold; color: #F1C40F;">Correo:</label>
                            <input type="text" readonly class="form-control shadow-sm" value="{{ user.email }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: bold; color: #F1C40F;">Nombre:</label>
                            <input type="text" readonly class="form-control shadow-sm" value="{{ user.nombre }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: bold; color: #F1C40F;">Apellidos:</label>
                            <input type="text" readonly class="form-control shadow-sm" value="{{ user.apellidos }}">
                        </div>
                        <div class="mb-3">
                            <label class="form-label" style="font-weight: bold; color: #F1C40F;">Celular:</label>
                            <input type="text" readonly class="form-control shadow-sm" value="{{ user.celular }}">
                        </div>
                        {% endif %}
                    </div>
                </div>
                <!-- Bot贸n para editar perfil si es su propio perfil -->
                {% if request.user == user %}
                <div class="text-center mt-4">
                    <a href="{% url 'editar_perfil' %}" class="btn btn-dark w-100 px-4 py-2 shadow-sm"
                        style="background-color: #2C3E50; color: white; font-weight: bold;">
                        Editar Informaci贸n
                    </a>
                </div>
                {% endif %}
            </div>
            <!-- Canchas a cargo (Solo si es responsable) -->
            {% if responsable %}
            <div class="card shadow-lg p-4 mt-4 mb-0" style="border-radius: 15px; background-color: #f5f5f5;">
                <h4 style="color: #2C3E50; font-weight: bold;">Canchas a Cargo</h4>
                <hr>
                <ul class="list-group">
                    {% if user.canchas.exists %}
                        {% for cancha in user.canchas.all %}
                            <li class="list-group-item d-flex justify-content-between align-items-center">
                                <span>{{ cancha.nombre }}</span>
                                <a href="" class="btn btn-outline-success btn-sm">
                                    Ver Detalles
                                </a>
                            </li>
                        {% endfor %}
                    {% else %}
                        <li class="list-group-item">No tiene canchas a cargo</li>
                    {% endif %}
                </ul>
            </div>
            {% endif %}
        </div>
    </div>
</main>

{% endblock %}